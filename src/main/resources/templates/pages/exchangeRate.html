<!DOCTYPE html>
<html th:replace="~{layout :: layout(~{::title}, ~{::main}, ~{::meta}, ~{::css}, ~{::scripts})}">
<head>
    <th:block th:fragment="meta">
        <th:block th:replace="~{fragments/meta :: meta(
            '실시간 환율 계산기 | 실시간 환율 그래프 - ExchangeCalc by KWTeam',
            '실시간 환율 계산기로 10개국 이상의 통화를 즉시 계산해보세요. 최근 1년간의 환율 변동 그래프를 무료로 제공합니다. 실시간 시장 환율 기준, 완전히 무료.'
        )}">
        </th:block>
    </th:block>

    <title>실시간 환율 계산기 | 실시간 환율 그래프 - ExchangeCalc by KWTeam</title>

    <th:block th:fragment="css">
        <link rel="stylesheet" th:href="@{/css/exchangeRate.css}">
    </th:block>
</head>
<body>
<main class="container-fluid">
    <h1 class="visually-hidden">실시간 환율 계산기</h1>

    <div class="calculator-wrapper">
        <!-- 계산기 카드 -->
        <section class="card calculator-card">
            <header class="card-content">
                <h2 class="visually-hidden">환율 계산</h2>
                <div class="mb-4">
                    <button id="selectCurrencies" class="btn btn-outline">
                        <span>통화 선택 (<span id="selectedCount">5</span>)</span>
                        <span class="chevron-down">▼</span>
                    </button>
                </div>
                <div id="currencyInputs">
                    <!-- Currency inputs will be dynamically added here -->
                </div>
            </header>
        </section>

        <!-- 차트 카드 -->
        <div class="card chart-card">
            <div class="card-content">
                <div class="chart-section">
                    <div class="mb-3">
                        <h6 class="text-light mb-2">차트에 표시할 통화 선택</h6>
                        <div id="currencySelector" class="currency-selector">
                            <!-- 동적으로 추가될 통화 옵션들 -->
                        </div>
                    </div>

                    <div class="chart-controls">
                        <div class="period-buttons mb-3">
                            <button class="period-btn" data-period="7">1주일</button>
                            <button class="period-btn" data-period="30">1개월</button>
                            <button class="period-btn" data-period="180">6개월</button>
                            <button class="period-btn" data-period="365">1년</button>
                            <button class="period-btn" data-period="all">전체</button>
                        </div>
                        <div class="custom-period">
                            <input type="number" id="customDays" placeholder="일수 입력 (2-365)" min="2" max="365">
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="exchangeRateChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 다이얼로그 -->
    <div id="currencyDialog" class="dialog">
        <div class="dialog-content">
            <div class="dialog-header">
                <h2>통화 선택</h2>
                <button id="closeDialog" class="close-btn">&times;</button>
            </div>
            <div class="dialog-body">
                <!-- Currency checkboxes will be dynamically added here -->
            </div>
        </div>
    </div>
</main>

<th:block th:fragment="scripts">
    <script th:src="@{/js/main.js}"></script>
    <script th:src="@{/js/storageUtil.js}"></script>
    <script th:src="@{/js/loadingUtil.js}"></script>
    <script th:src="@{/js/currencyUtil.js}"></script>
    <script th:src="@{/js/currencySelector.js}"></script>
    <script th:src="@{/js/chartUpdater.js}"></script>
</th:block>
</body>
</html>